/* ============================================================================
   index.css — Bristlecone Companies Design System
   ============================================================================
   Load order:
     1. Tailwind base/components/utilities
     2. tw-animate-css (Tailwind v4 animation helpers)
     3. CSS custom properties (design tokens)
     4. Base element styles
     5. Utility classes
     6. Hero animation keyframes + classes
     7. Reduced-motion overrides
   ============================================================================ */

@import "tailwindcss";
@import "tw-animate-css";

/* ── Dark mode variant ───────────────────────────────────────────────────── */
@custom-variant dark (&:is(.dark *));

/* ── Tailwind theme tokens (maps CSS vars → Tailwind color/font utilities) ─ */
@theme inline {
  --color-background:           hsl(var(--background));
  --color-foreground:           hsl(var(--foreground));
  --color-card:                 hsl(var(--card));
  --color-card-foreground:      hsl(var(--card-foreground));
  --color-popover:              hsl(var(--popover));
  --color-popover-foreground:   hsl(var(--popover-foreground));
  --color-primary:              hsl(var(--primary));
  --color-primary-foreground:   hsl(var(--primary-foreground));
  --color-secondary:            hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted:                hsl(var(--muted));
  --color-muted-foreground:     hsl(var(--muted-foreground));
  --color-accent:               hsl(var(--accent));
  --color-accent-foreground:    hsl(var(--accent-foreground));
  --color-destructive:          hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border:               hsl(var(--border));
  --color-input:                hsl(var(--input));
  --color-ring:                 hsl(var(--ring));

  --font-sans:  'Manrope', sans-serif;
  --font-serif: 'Libre Baskerville', serif;

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
}

/* ── Brand design tokens (light mode) ───────────────────────────────────── */
:root {
  /*
    Bristlecone Brand Palette
    ─────────────────────────────────────────────
    Background  Warm Beige   #F8F7F4  45  18%  96%
    Foreground  Soft Charcoal #151513  60   5%   8%
    Primary     Bristlecone Green #1b401f 126 41% 18%
    Accent      Warm Gold    #C9B896  40  32%  69%
    Border      Warm Gray    #e6e2da  40  18%  88%
  */

  --background:            45 18% 96%;  /* #F8F7F4  Warm Beige        */
  --foreground:            60  5%  8%;  /* #151513  Soft Charcoal      */

  --card:                   0  0% 100%; /* White                        */
  --card-foreground:        60  5%  8%;

  --popover:                0  0% 100%;
  --popover-foreground:     60  5%  8%;

  --primary:               126 41% 18%; /* #1b401f  Bristlecone Green  */
  --primary-foreground:      0  0% 100%; /* White text on primary        */

  --secondary:              40 10% 85%; /* Slightly darker beige        */
  --secondary-foreground:   60  5%  8%;

  --muted:                  40 10% 85%;
  --muted-foreground:       60  5% 40%;

  --accent:                 40 32% 69%; /* #C9B896  Warm Gold           */
  --accent-foreground:      60  5%  8%;

  --destructive:             0 84.2% 60.2%;
  --destructive-foreground:  0  0% 98%;

  --border:                 40 18% 88%; /* #e6e2da  Warm Gray           */
  --input:                  40 18% 88%;
  --ring:                  126 41% 18%;

  --radius: 0.5rem;
}

/* ── Brand design tokens (dark mode) ────────────────────────────────────── */
.dark {
  --background:            166 45% 10%;
  --foreground:             40 20% 94%;

  --card:                  166 45% 12%;
  --card-foreground:        40 20% 94%;

  --popover:               166 45% 12%;
  --popover-foreground:     40 20% 94%;

  --primary:               166 40% 25%;
  --primary-foreground:     40 20% 94%;

  --secondary:             166 30% 15%;
  --secondary-foreground:   40 20% 94%;

  --muted:                 166 30% 15%;
  --muted-foreground:      166 20% 65%;

  --accent:                 15 54% 51%;
  --accent-foreground:      40 20% 94%;

  --destructive:             0 62.8% 30.6%;
  --destructive-foreground:  0  0% 98%;

  --border:                166 30% 20%;
  --input:                 166 30% 20%;
  --ring:                  166 40% 25%;
}

/* ── Base element styles ─────────────────────────────────────────────────── */
@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground
           selection:bg-accent/20 selection:text-accent-foreground;
  }

  /* Headings default to serif — override with font-sans where needed */
  h1, h2, h3, h4, h5, h6 {
    @apply font-serif tracking-tight text-foreground;
  }
}

/* ── Utility classes ─────────────────────────────────────────────────────── */
@layer utilities {
  /* Balanced text wrapping (prevents awkward orphans in headings) */
  .text-balance {
    text-wrap: balance;
  }

  /* ── Layout ─────────────────────────────────────────────────────────── */

  /**
   * .container-custom
   * Centered, max-width content column with responsive horizontal padding.
   * Used by every section and the Navbar/Footer — do not change without
   * auditing all callers.
   *
   *   375px  →  px-4  (16px each side)
   *   640px  →  px-6  (24px each side)
   *   1024px →  px-8  (32px each side)
   *   max    →  1280px (max-w-7xl)
   */
  .container-custom {
    @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  /** Consistent vertical section rhythm (used by <Section> via inline py-*) */
  .section-padding {
    @apply py-12;
  }

  /* ── Typography ─────────────────────────────────────────────────────── */

  /** Tight editorial headline style (used sparingly for hero-scale text) */
  .headline-tight {
    line-height: 1.1;
    letter-spacing: -0.02em;
  }

  /** Small all-caps label above section titles (eyebrow text) */
  .kicker {
    @apply text-xs font-medium uppercase tracking-widest text-accent;
  }

  /** Constrained prose column — prevents overly long line lengths */
  .prose-narrow {
    @apply max-w-[62ch];
  }

  /* ── Interactive ─────────────────────────────────────────────────────── */

  /** Hairline divider (lighter than border token) */
  .divider-hairline {
    @apply border-t border-border/50;
  }

  /** Underline-on-hover link decoration */
  .hover-underline:hover {
    @apply underline underline-offset-2 decoration-primary/50;
  }

  /**
   * .hover-elevate / .active-elevate-2
   * Applied globally to <Button> via button.tsx CVA base styles.
   * Subtle lift on hover; slightly less lift on press.
   */
  .hover-elevate {
    @apply transition-transform duration-150 ease-out hover:-translate-y-px hover:shadow-sm;
  }

  .active-elevate-2 {
    @apply active:translate-y-0 active:shadow-none;
  }

  /* ── Card ────────────────────────────────────────────────────────────── */

  /**
   * .card-editorial
   * Standard card container used throughout the site.
   * Responsive padding and corner radius — mobile-first.
   */
  .card-editorial {
    @apply border border-border/50 rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8;
  }

  /* ── Section backgrounds ─────────────────────────────────────────────── */

  /**
   * .section-chapter
   * Adds a very subtle primary-tinted gradient veil to alternate sections,
   * creating a soft visual rhythm between light and "almost-light" rows.
   */
  .section-chapter {
    @apply relative;
  }

  .section-chapter::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background: linear-gradient(
      to bottom,
      transparent,
      hsl(var(--primary) / 0.015) 50%,
      transparent
    );
  }
}

/* ── Hero animation keyframes ────────────────────────────────────────────── */
/*
  These keyframes power the staggered fade-up entrance of hero elements and
  the scroll-indicator pulse. They live here (not in the component) so the
  browser can parse them once at stylesheet load time.
*/

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes scrollPulse {
  0%,  100% { opacity: 0.3; transform: scaleY(1); }
  50%        { opacity: 1;   transform: scaleY(0.6); }
}

/* ── Hero animation utility classes ─────────────────────────────────────── */
/*
  .hero-fade-1 through .hero-fade-5:  staggered fadeUp for hero text elements.
  .hero-tree:                          slower fadeUp for the tree illustration.
  .cta-underline:                      animated two-color underline for text CTAs.
  .scroll-line:                        pulsing vertical scroll indicator bar.
*/

.hero-fade-1 { animation: fadeUp 0.7s ease both; animation-delay: 0.10s; }
.hero-fade-2 { animation: fadeUp 0.7s ease both; animation-delay: 0.22s; }
.hero-fade-3 { animation: fadeUp 0.7s ease both; animation-delay: 0.34s; }
.hero-fade-4 { animation: fadeUp 0.7s ease both; animation-delay: 0.46s; }
.hero-fade-5 { animation: fadeUp 0.7s ease both; animation-delay: 0.58s; }
.hero-tree   { animation: fadeUp 1.1s ease both; animation-delay: 0.20s; }

/**
 * .cta-underline
 * Two-layer underline swap on hover:
 *   - Default state: foreground-colored underline (::after)
 *   - Hovered state: primary-colored underline draws in from the left (::before)
 *                    while the default underline retreats to the right
 */
.cta-underline {
  position: relative;
  padding-bottom: 6px;
}

.cta-underline::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0;
  width: 100%; height: 1px;
  background: hsl(var(--foreground));
  transform-origin: right;
  transform: scaleX(1);
  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.cta-underline::before {
  content: '';
  position: absolute;
  bottom: 0; left: 0;
  width: 100%; height: 1px;
  background: hsl(var(--primary));
  transform-origin: left;
  transform: scaleX(0);
  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1) 0.05s;
}

.cta-underline:hover::after  { transform-origin: left;  transform: scaleX(0); }
.cta-underline:hover::before { transform-origin: right; transform: scaleX(1); }

/**
 * .scroll-line
 * Thin vertical bar with a breathing pulse animation used as a scroll hint
 * indicator below the hero CTA area.
 */
.scroll-line {
  width: 1px;
  height: 40px;
  background: hsl(var(--muted-foreground));
  animation: scrollPulse 2s ease-in-out infinite;
}

/* ── Reduced motion overrides ────────────────────────────────────────────── */
/*
  Respects the OS-level "reduce motion" accessibility preference.
  All animations and transitions are collapsed to near-instant.
  Framer Motion also reads `useReducedMotion()` separately in components.
*/
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
